<!DOCTYPE html>
<html lang="en">
  {{template "head"}}
  <body>
    {{template "header" .}}

    <main>

    <div class="page_title_wrapper">
      <div class="page_title">
        <h1>Users</h1>
      </div>
    </div>

    <div class="page_content_wrapper">
      <table class="page_content_wrapper_in table table-hover">
        <thead>
          <tr>
            {{if .IsAdmin}}
            <th class="col-sm-6">Username</th>
            <th class="col-sm-2 users_list_user_type">User Type</th>
            <th class="col-sm-2 users_list_creation_date">Creation Date</th>
            <th class="col-sm-2 users_list_change_type">Change Type</th>
            {{else}}
            <th class="col-sm-8">Username</th>
            <th class="col-sm-2 users_list_user_type">User Type</th>
            <th class="col-sm-2 users_list_creation_date">Creation Date</th>
            {{end}}
          </tr>
        </thead>
        <tbody>
          {{range .Users}}
            {{if eq .Usertype "Administrator"}}
            <tr class="warning">
            {{else if .IsBanned}}
            <tr class="danger">
            {{else if eq .Usertype "Moderator"}}
            <tr class="info">
            {{else}}
            <tr>
            {{end}}
              <td>
                <a href="/users/{{.Username}}">{{.Username}}</a>
                {{template "banned" .IsBanned}}
              </td>
              <td class="users_list_user_type">
                {{.Usertype}}
              </td>
              <td class="users_list_creation_date">
                {{.CreatedAt}}
              </td>

              {{if $.IsAdmin}}
              <td class="users_list_change_type">
                {{if eq .Usertype "Administrator"}}
                -
                {{else if eq .Usertype "Moderator"}}
                <a href="/admin/users/{{.Username}}/change_type?new_type=basic">Make Basic</a>
                {{else}}
                <a href="/admin/users/{{.Username}}/change_type?new_type=moderator">Make Moderator</a>
                {{end}}
              </td>
              {{end}}
            </tr>
          {{end}}
        </tbody>
      </table>
    </div>

    {{template "pages" .}}

    </main>

    {{template "footer"}}
  </body>
</html>
