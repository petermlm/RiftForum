<!DOCTYPE html>
<html lang="en">
{{template "head"}}
<body>
    {{template "header" .}}

    <main>

    <div class="page_title_wrapper">
        <div class="page_title">
            <h1>Topics</h1>
        </div>
    </div>

    <div class="page_content_wrapper">
        <table class="page_content_wrapper_in table table-striped table-hover">
            <thead>
                <tr>
                    <th class="col-sm-*">Topic Title</th>
                    <th class="col-sm-2 topics_list_messages">Messages</th>
                    <th class="col-sm-2">Last Post</th>
                </tr>
            </thead>
            <tbody>
                {{range .Topics}}
                <tr>
                    <td class="topics_list_title">
                        <a href="/topics/{{ .TopicId }}" class="link_visited">{{ .Title }}</a><br/>
                        <span class="topics_list_title_author">
                            By
                            <a href="/users/{{ .AuthorUsername }}" class="topics_list_title_author_hl">
                                {{ .AuthorUsername }}
                            </a>
                            on
                            <span class="topics_list_title_author_hl">{{ .CreatedAt }}</span>
                        </span>
                    </td>
                    <td class="topics_list_messages">{{ .MessageCount }}</td>
                    <td>
                        <span class="topics_list_last">
                            By
                            <span class="topics_list_last_hl">
                                <a href="/users/{{ .LastAuthor }}">
                                {{ .LastAuthor }}
                                </a>
                            </span>
                            on<br/>
                            <span class="topics_list_last_hl">{{ .LastTimestamp }}</span>
                        </span>
                    </td>
                </tr>
                {{end}}
            </tbody>
        </table>

    </div>

    <div class="page_content_wrapper">
        <nav aria-label="Page navigation example">
            <ul class="pagination">
                {{if gt $.PageNum 0}}
                <li class="page-item">
                    <a class="page-link" href="/?page_size={{$.PageSize}}&page_num={{sub $.PageNum 1}}">
                        Previous
                    </a>
                </li>
                {{if gt (sub $.PageNum 1) 0}}
                <li class="page-item">
                    <a class="page-link" href="/?page_size={{$.PageSize}}&page_num={{sub $.PageNum 2}}">
                        {{sub $.PageNum 2}}
                    </a>
                </li>
                {{end}}
                <li class="page-item">
                    <a class="page-link" href="/?page_size={{$.PageSize}}&page_num={{sub $.PageNum 1}}">
                        {{sub $.PageNum 1}}
                    </a>
                </li>
                {{end}}
                <li class="page-item current-page-item">
                    <a class="page-link" href="/?page_size={{$.PageSize}}&page_num={{$.PageNum}}">
                        {{$.PageNum}}
                    </a>
                </li>
                {{if lt $.PageNum $.PageMax}}
                <li class="page-item">
                    <a class="page-link" href="/?page_size={{$.PageSize}}&page_num={{add $.PageNum 1}}">
                        {{add $.PageNum 1}}
                    </a>
                </li>
                {{if lt (add $.PageNum 1) $.PageMax}}
                <li class="page-item">
                    <a class="page-link" href="/?page_size={{$.PageSize}}&page_num={{add $.PageNum 2}}">
                        {{add $.PageNum 2}}
                    </a>
                </li>
                {{end}}
                <li class="page-item">
                    <a class="page-link" href="/?page_size={{$.PageSize}}&page_num={{add $.PageNum 1}}">
                        Next
                    </a>
                </li>
                {{end}}
            </ul>
        </nav>
    </div>

    {{if .HasUser}}
    <div class="new_topic_form_wrapper">
        <div class="new_topic_forum">
            <form method="POST" action="/topics">
                <input class="form-control" name="title" placeholder="Title" type="text" />
                <textarea class="form-control" name="message" placeholder="Message"></textarea>
                <button type="submit" class="btn btn-default submit_button" name="submit">Send</button>
            </form>
        </div>
    </div>
    {{end}}

    </main>

    {{template "footer"}}
</body>
</html>
